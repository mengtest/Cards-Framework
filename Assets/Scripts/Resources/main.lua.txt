--protobuf = require "protobuf"
local pb = require"pb"

function main()
    print("hello world!!!!!!")
    print("I am hsu")
	local globalEventManager = CS.NCSpeedLight.GlobalEventManager.GetInstance()
	print(globalEventManager)
	globalEventManager:Register(2,
		function(eventObj)
			print(eventObj.EventID)
		end
	)
	local eventObj = CS.NCSpeedLight.Event(2)
	globalEventManager:Notify(eventObj)
end

function decodepb()
	local path =  "D:/addressbook.pb";
    local addr = io.open(path, "rb")
    local buffer = addr:read "*a"
    addr:close()
    protobuf.register(buffer)
    local decode = protobuf.decode("tutorial.Person" , data)

    print(decode.name)
    print(decode.id)
    for _,v in ipairs(decode.phone) do
        print("\t"..v.number, v.type)
    end
end

main()